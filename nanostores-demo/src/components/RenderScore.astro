<div x-data>
  The score is
  <span x-init="initScore($el)"></span>.
</div>

<script>
  import { $score, $status } from "../stores.js";

  /*
  // This declaration can be omitted if @tsignore is used below.
  declare global {
    function init(el: HTMLElement): void;
  }
  */

  // @ts-ignore
  globalThis.initScore = (el: HTMLElement) => {
    $score.subscribe((value) => {
      // There is a timing issue with computed stores being updated!
      const status = $status.get();
      console.log("RenderScore.astro subscribe: status =", status);
      el.innerText = `${value} (${status})`;
    });
  };
</script>
